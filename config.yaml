p: &p {type: http, interval: 86400, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 300}, proxy: DIRECT, override: {udp: true}}
  
proxy-providers:
  p1:
    <<: *p
    # è®¢é˜…åœ°å€
    url: ""
    header:
      User-Agent:
        - "mihomo"
#  p2:
#    <<: *p
#    # è®¢é˜…åœ°å€
#    url: ""
#    header:
#      User-Agent:
#        - "mihomo"

#  p3:
#    ...

mixed-port: 7890
allow-lan: false
ipv6: false
unified-delay: true
tcp-concurrent: true
log-level: info
mode: rule
find-process-mode: strict
global-client-fingerprint: chrome

# ç§»åŠ¨è®¾å¤‡çœç”µ
# disable-keep-alive: false
# keep-alive-idle: 15
# keep-alive-interval: 15

profile:
  store-selected: true
  store-fake-ip: true

tun:
  enable: true
  stack: mixed
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

dns:
  enable: true
  cache-algorithm: arc
  listen: 127.0.0.1:1053
  ipv6: false
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  default-nameserver:
    - https://223.5.5.5/dns-query
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  direct-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver:
    - https://8.8.8.8/dns-query#RULES&ecs=183.228.0.0/16
  fake-ip-filter:
    - "rule-set:fakeipfilter"

proxy-groups:
  - { name: 'ðŸš€ é»˜è®¤', type: select, proxies: ['ðŸ‡­ðŸ‡° é¦™æ¸¯', 'ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡', 'ðŸ‡¯ðŸ‡µ æ—¥æœ¬', 'ðŸ‡¨ðŸ‡³ å°æ¹¾', 'ðŸ‡ºðŸ‡¸ ç¾Žå›½', 'ðŸ‡ªðŸ‡º æ¬§æ´²', 'ðŸ‡ºðŸ‡³ å…¶ä»–'] }
  - { name: 'ðŸ‡­ðŸ‡° é¦™æ¸¯', type: select, include-all: true, proxies: ['â™»ï¸ é¦™æ¸¯è‡ªåŠ¨'], filter: "(?i)æ¸¯|hk|hongkong|hong kong" }
  - { name: 'ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡', type: select, include-all: true, proxies: ['â™»ï¸ æ–°åŠ å¡è‡ªåŠ¨'], filter: "(?i)æ–°åŠ å¡|sg|singapore" }
  - { name: 'ðŸ‡¯ðŸ‡µ æ—¥æœ¬', type: select, include-all: true, proxies: ['â™»ï¸ æ—¥æœ¬è‡ªåŠ¨'], filter: "(?i)æ—¥|jp|japan" }
  - { name: 'ðŸ‡¨ðŸ‡³ å°æ¹¾', type: select, include-all: true, proxies: ['â™»ï¸ å°æ¹¾è‡ªåŠ¨'], filter: "(?i)å°|taiwan" }
  - { name: 'ðŸ‡ºðŸ‡¸ ç¾Žå›½', type: select, include-all: true, proxies: ['â™»ï¸ ç¾Žå›½è‡ªåŠ¨'], filter: "(?i)ç¾Ž|us|unitedstates|united states" }
  - { name: 'ðŸ‡ªðŸ‡º æ¬§æ´²', type: select, include-all: true, filter: "(?i)å¾·|Germany|è‹±|Britain|åœŸè€³å…¶|Turkey" }
  - { name: 'ðŸ‡ºðŸ‡³ å…¶ä»–', type: select, include-all: true, filter: "(?i)^(?!.*(?:ðŸ‡­ðŸ‡°|ðŸ‡¯ðŸ‡µ|ðŸ‡ºðŸ‡¸|ðŸ‡¸ðŸ‡¬|ðŸ‡¨ðŸ‡³|æ¸¯|hk|hongkong|å°|taiwan|æ—¥|jp|japan|æ–°åŠ å¡|sg|singapore|ç¾Ž|us|unitedstates|å¾·å›½|Germany|è‹±å›½|Britain|åœŸè€³å…¶|Turkey)).*" }
  - { name: 'âž¡ï¸ ç›´è¿ž', type: select, proxies: [DIRECT, 'ðŸš€ é»˜è®¤'] }
  - { name: 'ðŸ  å±€åŸŸç½‘', type: select, proxies: ['âž¡ï¸ ç›´è¿ž', 'ðŸš€ é»˜è®¤'] }
  - { name: 'ðŸŸï¸ æ¼ç½‘ä¹‹é±¼', type: select, proxies: ['ðŸš€ é»˜è®¤', 'âž¡ï¸ ç›´è¿ž'] }
  - { name: 'ðŸš« å¹¿å‘Š', type: select, proxies: [REJECT] }
  - { name: 'â™»ï¸ é¦™æ¸¯è‡ªåŠ¨', type: url-test, include-all: true, hidden: true, tolerance: 20, interval: 300, filter: "(?i)æ¸¯|hk|hongkong|hong kong" }
  - { name: 'â™»ï¸ æ–°åŠ å¡è‡ªåŠ¨', type: url-test, include-all: true, hidden: true, tolerance: 20, interval: 300, filter: "(?i)(æ–°åŠ å¡|sg|singapore)" }
  - { name: 'â™»ï¸ æ—¥æœ¬è‡ªåŠ¨', type: url-test, include-all: true, hidden: true, tolerance: 20, interval: 300, filter: "(?i)æ—¥|jp|japan" }
  - { name: 'â™»ï¸ å°æ¹¾è‡ªåŠ¨', type: url-test, include-all: true, hidden: true, tolerance: 20, interval: 300, filter: "(?i)å°|taiwan" }
  - { name: 'â™»ï¸ ç¾Žå›½è‡ªåŠ¨', type: url-test, include-all: true, hidden: true, tolerance: 20, interval: 300, filter: "(?i)ç¾Ž|us|unitedstates|united states" }

rule-anchor:
  mrs: &mrs {type: http, interval: 86400, behavior: domain, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: yaml}
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: yaml}
  class: &class {type: http, interval: 86400, behavior: classical, format: yaml}

rule-providers:
  reject: {<<: *mrs, url: "https://raw.githubusercontent.com/217heidai/adblockfilters/main/rules/adblockmihomo.mrs"}
  fakeipfilter: {<<: *mrs, url: "https://raw.githubusercontent.com/wwqgtxx/clash-rules/release/fakeip-filter.mrs"}
  
  icloud: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/icloud.txt"}
  apple: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/apple.txt"}
  google: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/google.txt"}
  proxy: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt"}
  direct: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt"}
  private: {<<: *domain, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/private.txt"}

  telegramcidr: {<<: *ip, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/telegramcidr.txt"}
  cncidr: {<<: *ip, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/cncidr.txt"}
  lancidr: {<<: *ip, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/lancidr.txt"}

  applications: {<<: *class, url: "https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/applications.txt"}
  diy-direct: {<<: *class, url: "https://raw.githubusercontent.com/haha12358/DIY-rules/refs/heads/main/diy-direct.yaml"}
  diy-proxy: {<<: *class, url: "https://raw.githubusercontent.com/haha12358/DIY-rules/refs/heads/main/diy-proxy.yaml"}

rules:
  - RULE-SET,applications,âž¡ï¸ ç›´è¿ž
  - DOMAIN,clash.razord.top,âž¡ï¸ ç›´è¿ž
  - DOMAIN,yacd.haishan.me,âž¡ï¸ ç›´è¿ž

  - RULE-SET,private,âž¡ï¸ ç›´è¿ž
  - RULE-SET,reject,ðŸš« å¹¿å‘Š

  - RULE-SET,diy-direct,âž¡ï¸ ç›´è¿ž
  - RULE-SET,diy-proxy,ðŸš€ é»˜è®¤

  - RULE-SET,icloud,âž¡ï¸ ç›´è¿ž
  - RULE-SET,apple,âž¡ï¸ ç›´è¿ž
  - RULE-SET,google,ðŸš€ é»˜è®¤

  - RULE-SET,proxy,ðŸš€ é»˜è®¤
  - RULE-SET,direct,âž¡ï¸ ç›´è¿ž
  
  - RULE-SET,lancidr,ðŸ  å±€åŸŸç½‘,no-resolve
  - RULE-SET,telegramcidr,ðŸš€ é»˜è®¤,no-resolve
  - RULE-SET,cncidr,âž¡ï¸ ç›´è¿ž

  - GEOIP,CN,âž¡ï¸ ç›´è¿ž

  - MATCH,ðŸŸï¸ æ¼ç½‘ä¹‹é±¼
